# Java基础— —整数和浮点数的存储

本文主要介绍Java中整数和浮点数的存储。

[toc]

## 1. 整数的存储

### 1.1 原码、反码、补码

在Java中，整数有`byte`、`short`、`int`和`long`，分别占据1个字节、2个字节、4个字节和8个字节。

在Java中，存储整数采用**补码**的方式进行存储。

要了解补码，首先要了解原码和反码。

**原码：**原码将数字的二进制分为两部分，符号位和数字的绝对值二进制表示；对于正数来说，符号位为0；对于负数来说，符号位为1。例如，以`byte`为例，10和-10的原码表示如下：

```txt
10:  0000 1010
-10: 1000 1010
```

**反码**：对于正数来说，反码就是原码；对于负数来说，反码就是在原码的基础上，符号位不变，其余位反转。例如，10和-10的反码如下：

```txt
10:  0000 1010
-10: 1111 0101
```

**补码**：对于正数来说，补码就是原码；对于负数来说，补码就是在反码的基础上，加1.。例如，10和-10的补码如下：

```txt
10:  0000 1010
-10: 1111 0110
```



### 1.2 为什么要使用补码？

我们知道，在计算机中，我们使用补码来存储整数。

为什么不用原码和反码呢？下面我们以byte为例，通过例子一步步来讲解。

现在考虑使用原码来存储整数，并且计算`1-1`，则结果为：

```txt'\
1-1 = 1 + (-1) = [原码表示]0000 0001 + 1000 0001 = [原码]1000 0010 = -2
```

这与正确结果不符，为了解决原码做减法的问题，引入了反码：

```txt
1-1 = 1 + (-1) = [反码表示]0000 0001 + 1111 1110 = [反码]1111 1111 = [原码]1000 0000 = -0
```

得到结果-0，这与正确结果0相同，但是，反码又引入了一个新的问题，0有两种表示方式：

```txt
+0: 0000 0000
-0: 1000 0000
```

在我们的认知中，0应该只有一种表示，所以为了解决0的表示问题，引入了补码：

```txt
1-1 = 1 + (-1) = [补码表示]0000 0001 + 1111 1111 
			   = [补码]1 0000 0000 
			   = [省略最高位] 0000 0000
			   = 0
```

所以在补码中，0只有一种表示方式，那就是`0000 0000 `，那`1000 0000`表示什么呢？

如果我们用原码来表示一个有符号整数，那么一个字节的取值范围是多少呢？答案是：[-127,127]。其中有+0和-0的区分，在补码中，由于0只有一种表示，所以另一种表示`1000 0000`我们用来表示byte的最小数-128。我们可以这样来确定-128的二进制表示:

```txt
-127 + (-1) = [补码] 1000 0001 + 1111 1111
			=[补码] 1 1000 0000
			=[省略最高位]1000 0000
			=-128
```

所以在补码表示有符号整数中，如果有n位，则取值范围为[-2^n-1^，2^n-1^-1]。



## 2. 浮点数的存储