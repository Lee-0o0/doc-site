# C语言— —数组
本文主要介绍C语言中的数组知识。



## 1. 什么是数组？
假如你是一位老师，现在请你用C语言记录班级40位同学的数学成绩，你会怎么做呢？

你是想声明40个整型变量，来存储学生成绩吗：
```c
int score1, score2, score3...
```
显然，这种办法是繁琐不可取的。C语言提供了数组来存储相同类型的数据。

所谓数组，你可以把它看成是相同类型的变量的集合，如下图：

![image-20220224104317750](https://cdn.jsdelivr.net/gh/Lee-0o0/image-store/PicGo/2022-02-25/1a596b8d87b8b153ec05920e0e2cbbe6--f2f4--image-20220224104317750.png)

## 2. 数组的声明与初始化
数组的声明语法如下：
```c
数组中的元素类型 数组名[数组长度];
```
例如：
```c
int num[10];
```
上述声明了一个长度为10的数组`num`，该数组可以存储10个整型数据。

我们可以在声明数组时进行数组初始化，用大括号括住初始值：
```c
int num[6] = {1, 2, 3, 4, 5, 6};
```
上述声明了一个长度为6的整型数组，并且数组中存储的值如下图：

![image-20220224195219356](https://cdn.jsdelivr.net/gh/Lee-0o0/image-store/PicGo/2022-02-25/0369dc0c006fb8345b3ff704c14795d1--ad50--image-20220224195219356.png)

初始化时，可以为小于等于数组长度的元素赋值，例如：
```c
int num[6] = {1, 2, 3};
```
上述语句为数组前三个元素赋值，后三个元素为默认值0。

如果在声明数组时进行初始化，可以不指定数组长度，数组的长度会自动计算：

```c
int num[] = {1, 2, 3};
```
上面的内容是声明及初始化一维数组，我们也可以声明和初始化多维数组，这里以二维数组为例，声明语法类似，例如：
```c
int twoDimensionsNum[3][2] ={{1, 2}, {3, 4}, {5, 6}};
```
上述语句声明并初始化了一个3行2列的二维数组，示意图如下：

![image-20220224195413570](https://cdn.jsdelivr.net/gh/Lee-0o0/image-store/PicGo/2022-02-25/bdcf20dfcd1122d09c20a8b154643cf9--6774--image-20220224195413570.png)



## 3. 操作数组

### 3.1 获取数组值

当我们声明一个数组后，就可以使用数组了，最基本的用法就是读取元素值或给数组中的元素赋值。

我们可以通过索引来获取数组中的值，索引从0开始，数组中最后一个元素的索引为`length-1`，`length`为数组长度。

获取数组元素值的语法如下：

```c
数组名[索引];
```

例如：

```c
int num[5] = {9,4,6,90,11};

printf("num[0]=%d", num[0]);     // 获取第一个元素的值，输出9
printf("num[4]=%d", nums[4]);    // 获取最后一个元素的值，输出11

// 我们也可以通过索引给数组中的某个元素赋值
num[0] = 100;
```



### 3.2 获取数组长度

我们可以通过`sizeof`关键字计算数组的长度：

```c
int num[] = {1,2,3,4,6,2,3,4,1,2,3,4,5,6,2,3,9,0,-1,-90};

int length = sizeof(num)/sizeof(num[0]);
printf("length=%d",length);          // 输出：length=20
```

- `sizeof(num)`计算num数组所占的字节数；
- `sizeof(num[0])`计算数组第一个元素所占的字节数；
- 由于数组中存储的元素类型相同，所以`sizeof(num)/sizeof(num[0])`就可以得出数组中有多少元素，即数组的长度；



### 3.3 遍历数组值

通过获取数组长度，我们可以利用循环遍历数组的值：

```c
int num[] = {1,2,3,4,6,2,3,4,1,2,3,4,5,6,2,3,9,0,-1,-90};

int length = sizeof(num)/sizeof(num[0]);

for(int i = 0; i < length; i++){
    printf("%d\t",num[i]);
}
```

对于二维数组，遍历代码如下：

```c
int num[w][h] = {{},{},{}..};

for(int i = 0; i < w; i++){
    for(int j = 0; j < h; j++){
        printf("%d\t",num[i][j]);
    }
    printf("\n");
}
```



## 4. 数组与指针

在C语言中，数组名就是一个指针，它存储数组中第一个元素的地址：

```c
int num[] = {2,5,3,8};
```

![image-20220224200802056](https://cdn.jsdelivr.net/gh/Lee-0o0/image-store/PicGo/2022-02-25/c324ebc49f6b30bbc7ed39b3d50015c2--b133--image-20220224200802056.png)

所以，我们可以声明如下整型指针`p`，并给它赋值：

```c
int num[] = {2,5,3,8};

int *p;
// 下面两个语句相同
p = &num[0];     // 语句1
p = num;         // 语句2
```

我们可以通过索引来循环遍历数组的值，现在我们可以通过指针及其移动的属性，来循环获取数组的值：

```c
int num[] = {1,2,3,4,6,2,3,4,1,2,3,4,5,6,2,3,9,0,-1,-90};
int length = sizeof(num)/sizeof(num[0]);
int *p = num;

for(int i = 0; i < length; i++){
    printf("%d\t",*(p+i));     // *(num+i)也可以
}
```

对于二维数组，如果我们想用指针来遍历数组，那么要怎么做呢？

```c
int num[3][2] = {{10,20},{30,40},{50,60}};
int length = sizeof(num)/sizeof(num[0][0]);   // 注意是num[0][0]，不要写成num[0]

for(int i = 0; i < length; i++){
    printf("%d\t",*(num+i));
}
```

输出结果：

```txt
6487600 6487608 6487616 6487624 6487632 6487640
```

这是什么鬼？？？其实问题出在`*(num+i)`，`num`指向该二维数组中一维数组的首地址：

![image-20220224215651342](https://cdn.jsdelivr.net/gh/Lee-0o0/image-store/PicGo/2022-02-25/457db17fde8657704f7d453ef179484a--e774--image-20220224215651342.png)

当`num+1`时，指向的位置如下：

![image-20220225211053633](https://cdn.jsdelivr.net/gh/Lee-0o0/image-store/PicGo/2022-02-25/ec607af40fc39e7a1d4a395ea4ba4dfe--be78--image-20220225211053633.png)

我们可以输出指针存储的值：

```c
int num[3][2] = {{10,20},{30,40},{50,60}};
int length = sizeof(num)/sizeof(num[0][0]);  

for(int i = 0; i < length; i++){
    printf("%p\n",num+i);
}
```

输出结果：

```txt
000000000062FE30
000000000062FE38
000000000062FE40
000000000062FE48
000000000062FE50
000000000062FE58
```

可以看到`num`存储的地址为`000000000062FE30`，`num+1`存储的地址为`000000000062FE38`，两者相差8个字节，就是两个整型的大小。

那么如何用指针遍历二维数组呢？


```c
int num[3][2] = {{10,20},{30,40},{50,60}};
int length = sizeof(num)/sizeof(num[0][0]);  

for(int i = 0; i < length; i++){
    printf("%d\t",*(&num[0][0]+i));
}
```

